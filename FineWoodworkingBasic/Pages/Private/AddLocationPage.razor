@page "/add-location"
@using FineWoodworkingBasic.Service
@using FineWoodworkingBasic.Model
@using System.ComponentModel.DataAnnotations
@inject AddLocationService svc
@inject AllStateInfoService FullState


<PageTitle>Add Location</PageTitle>
<EditForm Model="@model" OnValidSubmit="OnValidSubmit">
<DataAnnotationsValidator/>
    <MudCard>
        <MudCardContent>
            <MudText Align="Align.Center" Typo="Typo.h5">Add a Location</MudText>
            <MudDivider DividerType="DividerType.Middle" Light="true" />
            <br />

            <MudAutocomplete T="string" @bind-Value="model.Area" Clearable="true" Counter="10" Immediate="true" Variant="Variant.Text" Label="Area" AnchorOrigin="Origin.BottomCenter"
                             CoerceText="false" CoerceValue="true" SearchFunc="@Search1" For="@(() => model.Area)" Validation="@(new Func<string, IEnumerable<string>>(MaxTenCharacters))"/>

            <MudTextField T="string" Label="Locus" Clearable="true" Counter="25" Immediate="true" Variant="Variant.Text" AutoGrow="true"
                          @bind-Value="model.Locus" Validation="@(new Func<string, IEnumerable<string>>(MaxTwentyFiveCharacters))" />

        </MudCardContent>

        <MudCardActions>
            @*Clear Button*@
            <MudButton Variant="Variant.Filled" Color="Color.Secondary" DisableElevation="true" OnClick="ClearAll"
            Class="mr-3 ml-2">
                @if (spin)
                {
                    <MudProgressLinear Color="Color.Primary" Indeterminate="true" />
                }
                else
                {
                    <MudText>Clear</MudText>
                }
            </MudButton>

            @*Submit Button with loading *@
            <MudButton ButtonType="ButtonType.Submit" DisableElevation="true" Variant="Variant.Filled" Color="Color.Primary">
            @if (spin)
            {
                <MudProgressLinear Color="Color.Primary" Indeterminate="true" />
            }
            else
            {
                <MudText>Add</MudText>
            }
            </MudButton>
        </MudCardActions>
    </MudCard>
</EditForm>

@*Status Message*@
<MudText Color="msgColor">@addLocationMessage</MudText>